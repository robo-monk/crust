var Qe=Object.defineProperty;var xe=(a,u,i)=>u in a?Qe(a,u,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[u]=i;var ne=(a,u,i)=>(xe(a,typeof u!="symbol"?u+"":u,i),i),je=(a,u,i)=>{if(!u.has(a))throw TypeError("Cannot "+i)};var Pe=(a,u,i)=>{if(u.has(a))throw TypeError("Cannot add the same private member more than once");u instanceof WeakSet?u.add(a):u.set(a,i)};var Ae=(a,u,i)=>(je(a,u,"access private method"),i);(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function e(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();function G(){}function Ye(a){return a()}function Le(){return Object.create(null)}function ee(a){a.forEach(Ye)}function Be(a){return typeof a=="function"}function Se(a,u){return a!=a?u==u:a!==u||a&&typeof a=="object"||typeof a=="function"}let re;function Fe(a,u){return re||(re=document.createElement("a")),re.href=u,a===re.href}function Ze(a){return Object.keys(a).length===0}function ke(a,u){a.appendChild(u)}function K(a,u,i){a.insertBefore(u,i||null)}function H(a){a.parentNode.removeChild(a)}function et(a,u){for(let i=0;i<a.length;i+=1)a[i]&&a[i].d(u)}function x(a){return document.createElement(a)}function We(a){return document.createTextNode(a)}function tt(){return We(" ")}function nt(){return We("")}function Y(a,u,i){i==null?a.removeAttribute(u):a.getAttribute(u)!==i&&a.setAttribute(u,i)}function rt(a){return Array.from(a.childNodes)}let k;function Z(a){k=a}function ot(){if(!k)throw new Error("Function called outside component initialization");return k}function it(a){ot().$$.on_mount.push(a)}const j=[],Re=[],ie=[],Te=[],st=Promise.resolve();let ve=!1;function at(){ve||(ve=!0,st.then(Ue))}function be(a){ie.push(a)}const pe=new Set;let oe=0;function Ue(){const a=k;do{for(;oe<j.length;){const u=j[oe];oe++,Z(u),lt(u.$$)}for(Z(null),j.length=0,oe=0;Re.length;)Re.pop()();for(let u=0;u<ie.length;u+=1){const i=ie[u];pe.has(i)||(pe.add(i),i())}ie.length=0}while(j.length);for(;Te.length;)Te.pop()();ve=!1,pe.clear(),Z(a)}function lt(a){if(a.fragment!==null){a.update(),ee(a.before_update);const u=a.dirty;a.dirty=[-1],a.fragment&&a.fragment.p(a.ctx,u),a.after_update.forEach(be)}}const se=new Set;let V;function _e(){V={r:0,c:[],p:V}}function ye(){V.r||ee(V.c),V=V.p}function X(a,u){a&&a.i&&(se.delete(a),a.i(u))}function B(a,u,i,e){if(a&&a.o){if(se.has(a))return;se.add(a),V.c.push(()=>{se.delete(a),e&&(i&&a.d(1),e())}),a.o(u)}else e&&e()}function He(a){a&&a.c()}function De(a,u,i,e){const{fragment:t,after_update:r}=a.$$;t&&t.m(u,i),e||be(()=>{const o=a.$$.on_mount.map(Ye).filter(Be);a.$$.on_destroy?a.$$.on_destroy.push(...o):ee(o),a.$$.on_mount=[]}),r.forEach(be)}function Oe(a,u){const i=a.$$;i.fragment!==null&&(ee(i.on_destroy),i.fragment&&i.fragment.d(u),i.on_destroy=i.fragment=null,i.ctx=[])}function ut(a,u){a.$$.dirty[0]===-1&&(j.push(a),at(),a.$$.dirty.fill(0)),a.$$.dirty[u/31|0]|=1<<u%31}function Me(a,u,i,e,t,r,o,l=[-1]){const n=k;Z(a);const s=a.$$={fragment:null,ctx:[],props:r,update:G,not_equal:t,bound:Le(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u.context||(n?n.$$.context:[])),callbacks:Le(),dirty:l,skip_bound:!1,root:u.target||n.$$.root};o&&o(s.root);let d=!1;if(s.ctx=i?i(a,u.props||{},(g,f,...p)=>{const S=p.length?p[0]:f;return s.ctx&&t(s.ctx[g],s.ctx[g]=S)&&(!s.skip_bound&&s.bound[g]&&s.bound[g](S),d&&ut(a,g)),f}):[],s.update(),d=!0,ee(s.before_update),s.fragment=e?e(s.ctx):!1,u.target){if(u.hydrate){const g=rt(u.target);s.fragment&&s.fragment.l(g),g.forEach(H)}else s.fragment&&s.fragment.c();u.intro&&X(a.$$.fragment),De(a,u.target,u.anchor,u.customElement),Ue()}Z(n)}class we{$destroy(){Oe(this,1),this.$destroy=G}$on(u,i){if(!Be(i))return G;const e=this.$$.callbacks[u]||(this.$$.callbacks[u]=[]);return e.push(i),()=>{const t=e.indexOf(i);t!==-1&&e.splice(t,1)}}$set(u){this.$$set&&!Ze(u)&&(this.$$.skip_bound=!0,this.$$set(u),this.$$.skip_bound=!1)}}const ct="/crust/assets/white-pawn.cc7de307.svg",dt="/crust/assets/white-bishop.1d7beace.svg",ft="/crust/assets/white-knight.54867912.svg",gt="/crust/assets/white-rook.4d42ab45.svg",ht="/crust/assets/white-queen.b72b864e.svg",mt="/crust/assets/white-king.56f55c78.svg",pt="/crust/assets/black-pawn.4413bf7c.svg",Ne="/crust/assets/black-bishop.ba67da76.svg",vt="/crust/assets/black-knight.735cc583.svg",bt="/crust/assets/black-rook.6abf617a.svg",Et="/crust/assets/black-queen.70191a3f.svg",St="/crust/assets/black-king.025eea92.svg";function Ie(a){let u,i;return{c(){u=x("img"),Fe(u.src,i=a[0])||Y(u,"src",i),Y(u,"alt",a[0])},m(e,t){K(e,u,t)},p(e,t){t&1&&!Fe(u.src,i=e[0])&&Y(u,"src",i),t&1&&Y(u,"alt",e[0])},d(e){e&&H(u)}}}function _t(a){let u,i=a[0]&&Ie(a);return{c(){u=x("div"),i&&i.c()},m(e,t){K(e,u,t),i&&i.m(u,null)},p(e,[t]){e[0]?i?i.p(e,t):(i=Ie(e),i.c(),i.m(u,null)):i&&(i.d(1),i=null)},i:G,o:G,d(e){e&&H(u),i&&i.d()}}}function yt(a,u,i){const e={WhitePawn:ct,WhiteBishop:dt,WhiteKnight:ft,WhiteRook:gt,WhiteQueen:ht,WhiteKing:mt,BlackPawn:pt,BlackBishop:Ne,BlackKnight:vt,BlackRook:bt,BlackQueen:Et,BlackKing:St};let{piece:t}=u,r=Ne;return a.$$set=o=>{"piece"in o&&i(1,t=o.piece)},a.$$.update=()=>{a.$$.dirty&2&&(async()=>t?i(0,r=e[`${t.color}${t.class}`]):i(0,r=null))()},[r,t]}class Dt extends we{constructor(u){super(),Me(this,u,yt,_t,Se,{piece:1})}}var Ve={exports:{}};(function(a,u){(function(e,t){a.exports=t()})(window,function(){return function(i){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return i[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=i,t.c=e,t.d=function(r,o,l){t.o(r,o)||Object.defineProperty(r,o,{enumerable:!0,get:l})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,o){if(o&1&&(r=t(r)),o&8||o&4&&typeof r=="object"&&r&&r.__esModule)return r;var l=Object.create(null);if(t.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:r}),o&2&&typeof r!="string")for(var n in r)t.d(l,n,function(s){return r[s]}.bind(null,n));return l},t.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(o,"a",o),o},t.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)},t.p="",t(t.s=66)}([function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(64),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(60),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(51);Object.defineProperty(e,"closest",{enumerable:!0,get:function(){return l(r).default}});var o=t(49);Object.defineProperty(e,"requestNextAnimationFrame",{enumerable:!0,get:function(){return l(o).default}});function l(n){return n&&n.__esModule?n:{default:n}}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(44);Object.keys(r).forEach(function(o){o==="default"||o==="__esModule"||Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[o]}})})},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(47),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(14);Object.keys(r).forEach(function(f){f==="default"||f==="__esModule"||Object.defineProperty(e,f,{enumerable:!0,get:function(){return r[f]}})});var o=t(13);Object.keys(o).forEach(function(f){f==="default"||f==="__esModule"||Object.defineProperty(e,f,{enumerable:!0,get:function(){return o[f]}})});var l=t(12);Object.keys(l).forEach(function(f){f==="default"||f==="__esModule"||Object.defineProperty(e,f,{enumerable:!0,get:function(){return l[f]}})});var n=t(6);Object.keys(n).forEach(function(f){f==="default"||f==="__esModule"||Object.defineProperty(e,f,{enumerable:!0,get:function(){return n[f]}})});var s=t(37),d=g(s);function g(f){return f&&f.__esModule?f:{default:f}}e.default=d.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(4);Object.defineProperty(e,"Sensor",{enumerable:!0,get:function(){return g(r).default}});var o=t(46);Object.defineProperty(e,"MouseSensor",{enumerable:!0,get:function(){return g(o).default}});var l=t(43);Object.defineProperty(e,"TouchSensor",{enumerable:!0,get:function(){return g(l).default}});var n=t(41);Object.defineProperty(e,"DragSensor",{enumerable:!0,get:function(){return g(n).default}});var s=t(39);Object.defineProperty(e,"ForceTouchSensor",{enumerable:!0,get:function(){return g(s).default}});var d=t(3);Object.keys(d).forEach(function(f){f==="default"||f==="__esModule"||Object.defineProperty(e,f,{enumerable:!0,get:function(){return d[f]}})});function g(f){return f&&f.__esModule?f:{default:f}}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(18);Object.keys(r).forEach(function(o){o==="default"||o==="__esModule"||Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[o]}})})},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(23);Object.keys(r).forEach(function(o){o==="default"||o==="__esModule"||Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[o]}})})},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(27);Object.keys(r).forEach(function(o){o==="default"||o==="__esModule"||Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[o]}})})},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(30);Object.keys(r).forEach(function(o){o==="default"||o==="__esModule"||Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[o]}})})},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(33);Object.keys(r).forEach(function(o){o==="default"||o==="__esModule"||Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[o]}})})},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(62);Object.defineProperty(e,"Announcement",{enumerable:!0,get:function(){return s(r).default}}),Object.defineProperty(e,"defaultAnnouncementOptions",{enumerable:!0,get:function(){return r.defaultOptions}});var o=t(59);Object.defineProperty(e,"Focusable",{enumerable:!0,get:function(){return s(o).default}});var l=t(57);Object.defineProperty(e,"Mirror",{enumerable:!0,get:function(){return s(l).default}}),Object.defineProperty(e,"defaultMirrorOptions",{enumerable:!0,get:function(){return l.defaultOptions}});var n=t(53);Object.defineProperty(e,"Scrollable",{enumerable:!0,get:function(){return s(n).default}}),Object.defineProperty(e,"defaultScrollableOptions",{enumerable:!0,get:function(){return n.defaultOptions}});function s(d){return d&&d.__esModule?d:{default:d}}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(63);Object.keys(r).forEach(function(o){o==="default"||o==="__esModule"||Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[o]}})})},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(65);Object.keys(r).forEach(function(o){o==="default"||o==="__esModule"||Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[o]}})})},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=void 0;var r=Object.assign||function(S){for(var M=1;M<arguments.length;M++){var y=arguments[M];for(var m in y)Object.prototype.hasOwnProperty.call(y,m)&&(S[m]=y[m])}return S},o=t(1),l=n(o);function n(S){return S&&S.__esModule?S:{default:S}}const s=Symbol("onSortableSorted"),d=e.defaultOptions={duration:150,easingFunction:"ease-in-out",horizontal:!1};class g extends l.default{constructor(M){super(M),this.options=r({},d,this.getOptions()),this.lastAnimationFrame=null,this[s]=this[s].bind(this)}attach(){this.draggable.on("sortable:sorted",this[s])}detach(){this.draggable.off("sortable:sorted",this[s])}getOptions(){return this.draggable.options.swapAnimation||{}}[s]({oldIndex:M,newIndex:y,dragEvent:m}){const{source:h,over:c}=m;cancelAnimationFrame(this.lastAnimationFrame),this.lastAnimationFrame=requestAnimationFrame(()=>{M>=y?f(h,c,this.options):f(c,h,this.options)})}}e.default=g;function f(S,M,{duration:y,easingFunction:m,horizontal:h}){for(const c of[S,M])c.style.pointerEvents="none";if(h){const c=S.offsetWidth;S.style.transform=`translate3d(${c}px, 0, 0)`,M.style.transform=`translate3d(-${c}px, 0, 0)`}else{const c=S.offsetHeight;S.style.transform=`translate3d(0, ${c}px, 0)`,M.style.transform=`translate3d(0, -${c}px, 0)`}requestAnimationFrame(()=>{for(const c of[S,M])c.addEventListener("transitionend",p),c.style.transition=`transform ${y}ms ${m}`,c.style.transform=""})}function p(S){S.target.style.transition="",S.target.style.pointerEvents="",S.target.removeEventListener("transitionend",p)}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=void 0;var r=t(15),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default,e.defaultOptions=r.defaultOptions},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(1),o=n(r),l=t(7);function n(y){return y&&y.__esModule?y:{default:y}}const s=Symbol("onDragStart"),d=Symbol("onDragStop"),g=Symbol("onDragOver"),f=Symbol("onDragOut"),p=Symbol("onMirrorCreated"),S=Symbol("onMirrorDestroy");class M extends o.default{constructor(m){super(m),this.firstSource=null,this.mirror=null,this[s]=this[s].bind(this),this[d]=this[d].bind(this),this[g]=this[g].bind(this),this[f]=this[f].bind(this),this[p]=this[p].bind(this),this[S]=this[S].bind(this)}attach(){this.draggable.on("drag:start",this[s]).on("drag:stop",this[d]).on("drag:over",this[g]).on("drag:out",this[f]).on("droppable:over",this[g]).on("droppable:out",this[f]).on("mirror:created",this[p]).on("mirror:destroy",this[S])}detach(){this.draggable.off("drag:start",this[s]).off("drag:stop",this[d]).off("drag:over",this[g]).off("drag:out",this[f]).off("droppable:over",this[g]).off("droppable:out",this[f]).off("mirror:created",this[p]).off("mirror:destroy",this[S])}[s](m){m.canceled()||(this.firstSource=m.source)}[d](){this.firstSource=null}[g](m){if(m.canceled())return;const h=m.source||m.dragEvent.source;if(h===this.firstSource){this.firstSource=null;return}const c=new l.SnapInEvent({dragEvent:m,snappable:m.over||m.droppable});this.draggable.trigger(c),!c.canceled()&&(this.mirror&&(this.mirror.style.display="none"),h.classList.remove(this.draggable.getClassNameFor("source:dragging")),h.classList.add(this.draggable.getClassNameFor("source:placed")),setTimeout(()=>{h.classList.remove(this.draggable.getClassNameFor("source:placed"))},this.draggable.options.placedTimeout))}[f](m){if(m.canceled())return;const h=m.source||m.dragEvent.source,c=new l.SnapOutEvent({dragEvent:m,snappable:m.over||m.droppable});this.draggable.trigger(c),!c.canceled()&&(this.mirror&&(this.mirror.style.display=""),h.classList.add(this.draggable.getClassNameFor("source:dragging")))}[p]({mirror:m}){this.mirror=m}[S](){this.mirror=null}}e.default=M},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.SnapOutEvent=e.SnapInEvent=e.SnapEvent=void 0;var r=t(0),o=l(r);function l(g){return g&&g.__esModule?g:{default:g}}class n extends o.default{get dragEvent(){return this.data.dragEvent}get snappable(){return this.data.snappable}}e.SnapEvent=n,n.type="snap";class s extends n{}e.SnapInEvent=s,s.type="snap:in",s.cancelable=!0;class d extends n{}e.SnapOutEvent=d,d.type="snap:out",d.cancelable=!0},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(7);Object.keys(r).forEach(function(s){s==="default"||s==="__esModule"||Object.defineProperty(e,s,{enumerable:!0,get:function(){return r[s]}})});var o=t(17),l=n(o);function n(s){return s&&s.__esModule?s:{default:s}}e.default=l.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=void 0;var r=Object.assign||function(y){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var c in h)Object.prototype.hasOwnProperty.call(h,c)&&(y[c]=h[c])}return y},o=t(1),l=s(o),n=t(2);function s(y){return y&&y.__esModule?y:{default:y}}const d=Symbol("onMirrorCreated"),g=Symbol("onMirrorDestroy"),f=Symbol("onDragOver"),p=Symbol("resize"),S=e.defaultOptions={};class M extends l.default{constructor(m){super(m),this.options=r({},S,this.getOptions()),this.lastWidth=0,this.lastHeight=0,this.mirror=null,this[d]=this[d].bind(this),this[g]=this[g].bind(this),this[f]=this[f].bind(this)}attach(){this.draggable.on("mirror:created",this[d]).on("drag:over",this[f]).on("drag:over:container",this[f])}detach(){this.draggable.off("mirror:created",this[d]).off("mirror:destroy",this[g]).off("drag:over",this[f]).off("drag:over:container",this[f])}getOptions(){return this.draggable.options.resizeMirror||{}}[d]({mirror:m}){this.mirror=m}[g](){this.mirror=null}[f](m){this[p](m)}[p]({overContainer:m,over:h}){requestAnimationFrame(()=>{this.mirror.parentNode!==m&&m.appendChild(this.mirror);const c=h||this.draggable.getDraggableElementsForContainer(m)[0];!c||(0,n.requestNextAnimationFrame)(()=>{const O=c.getBoundingClientRect();this.lastHeight===O.height&&this.lastWidth===O.width||(this.mirror.style.width=`${O.width}px`,this.mirror.style.height=`${O.height}px`,this.lastWidth=O.width,this.lastHeight=O.height)})})}}e.default=M},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=void 0;var r=t(20),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default,e.defaultOptions=r.defaultOptions},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(1),o=s(r),l=t(2),n=t(8);function s(S){return S&&S.__esModule?S:{default:S}}const d=Symbol("onDragMove"),g=Symbol("onDragStop"),f=Symbol("onRequestAnimationFrame");class p extends o.default{constructor(M){super(M),this.currentlyCollidingElement=null,this.lastCollidingElement=null,this.currentAnimationFrame=null,this[d]=this[d].bind(this),this[g]=this[g].bind(this),this[f]=this[f].bind(this)}attach(){this.draggable.on("drag:move",this[d]).on("drag:stop",this[g])}detach(){this.draggable.off("drag:move",this[d]).off("drag:stop",this[g])}getCollidables(){const M=this.draggable.options.collidables;return typeof M=="string"?Array.prototype.slice.call(document.querySelectorAll(M)):M instanceof NodeList||M instanceof Array?Array.prototype.slice.call(M):M instanceof HTMLElement?[M]:typeof M=="function"?M():[]}[d](M){const y=M.sensorEvent.target;this.currentAnimationFrame=requestAnimationFrame(this[f](y)),this.currentlyCollidingElement&&M.cancel();const m=new n.CollidableInEvent({dragEvent:M,collidingElement:this.currentlyCollidingElement}),h=new n.CollidableOutEvent({dragEvent:M,collidingElement:this.lastCollidingElement}),c=Boolean(this.currentlyCollidingElement&&this.lastCollidingElement!==this.currentlyCollidingElement),O=Boolean(!this.currentlyCollidingElement&&this.lastCollidingElement);c?(this.lastCollidingElement&&this.draggable.trigger(h),this.draggable.trigger(m)):O&&this.draggable.trigger(h),this.lastCollidingElement=this.currentlyCollidingElement}[g](M){const y=this.currentlyCollidingElement||this.lastCollidingElement,m=new n.CollidableOutEvent({dragEvent:M,collidingElement:y});y&&this.draggable.trigger(m),this.lastCollidingElement=null,this.currentlyCollidingElement=null}[f](M){return()=>{const y=this.getCollidables();this.currentlyCollidingElement=(0,l.closest)(M,m=>y.includes(m))}}}e.default=p},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.CollidableOutEvent=e.CollidableInEvent=e.CollidableEvent=void 0;var r=t(0),o=l(r);function l(g){return g&&g.__esModule?g:{default:g}}class n extends o.default{get dragEvent(){return this.data.dragEvent}}e.CollidableEvent=n,n.type="collidable";class s extends n{get collidingElement(){return this.data.collidingElement}}e.CollidableInEvent=s,s.type="collidable:in";class d extends n{get collidingElement(){return this.data.collidingElement}}e.CollidableOutEvent=d,d.type="collidable:out"},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(8);Object.keys(r).forEach(function(s){s==="default"||s==="__esModule"||Object.defineProperty(e,s,{enumerable:!0,get:function(){return r[s]}})});var o=t(22),l=n(o);function n(s){return s&&s.__esModule?s:{default:s}}e.default=l.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(24);Object.defineProperty(e,"Collidable",{enumerable:!0,get:function(){return s(r).default}});var o=t(21);Object.defineProperty(e,"ResizeMirror",{enumerable:!0,get:function(){return s(o).default}}),Object.defineProperty(e,"defaultResizeMirrorOptions",{enumerable:!0,get:function(){return o.defaultOptions}});var l=t(19);Object.defineProperty(e,"Snappable",{enumerable:!0,get:function(){return s(l).default}});var n=t(16);Object.defineProperty(e,"SwapAnimation",{enumerable:!0,get:function(){return s(n).default}}),Object.defineProperty(e,"defaultSwapAnimationOptions",{enumerable:!0,get:function(){return n.defaultOptions}});function s(d){return d&&d.__esModule?d:{default:d}}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(b){for(var _=1;_<arguments.length;_++){var D=arguments[_];for(var v in D)Object.prototype.hasOwnProperty.call(D,v)&&(b[v]=D[v])}return b},o=t(5),l=s(o),n=t(9);function s(b){return b&&b.__esModule?b:{default:b}}const d=Symbol("onDragStart"),g=Symbol("onDragOverContainer"),f=Symbol("onDragOver"),p=Symbol("onDragStop");function S({dragEvent:b}){const _=b.source.textContent.trim()||b.source.id||"sortable element";if(b.over){const D=b.over.textContent.trim()||b.over.id||"sortable element";return b.source.compareDocumentPosition(b.over)&Node.DOCUMENT_POSITION_FOLLOWING?`Placed ${_} after ${D}`:`Placed ${_} before ${D}`}else return`Placed ${_} into a different container`}const M={"sortable:sorted":S};class y extends l.default{constructor(_=[],D={}){super(_,r({},D,{announcements:r({},M,D.announcements||{})})),this.startIndex=null,this.startContainer=null,this[d]=this[d].bind(this),this[g]=this[g].bind(this),this[f]=this[f].bind(this),this[p]=this[p].bind(this),this.on("drag:start",this[d]).on("drag:over:container",this[g]).on("drag:over",this[f]).on("drag:stop",this[p])}destroy(){super.destroy(),this.off("drag:start",this[d]).off("drag:over:container",this[g]).off("drag:over",this[f]).off("drag:stop",this[p])}index(_){return this.getDraggableElementsForContainer(_.parentNode).indexOf(_)}[d](_){this.startContainer=_.source.parentNode,this.startIndex=this.index(_.source);const D=new n.SortableStartEvent({dragEvent:_,startIndex:this.startIndex,startContainer:this.startContainer});this.trigger(D),D.canceled()&&_.cancel()}[g](_){if(_.canceled())return;const{source:D,over:v,overContainer:E}=_,A=this.index(D),C=new n.SortableSortEvent({dragEvent:_,currentIndex:A,source:D,over:v});if(this.trigger(C),C.canceled())return;const P=this.getDraggableElementsForContainer(E),L=h({source:D,over:v,overContainer:E,children:P});if(!L)return;const{oldContainer:F,newContainer:R}=L,N=this.index(_.source),I=new n.SortableSortedEvent({dragEvent:_,oldIndex:A,newIndex:N,oldContainer:F,newContainer:R});this.trigger(I)}[f](_){if(_.over===_.originalSource||_.over===_.source)return;const{source:D,over:v,overContainer:E}=_,A=this.index(D),C=new n.SortableSortEvent({dragEvent:_,currentIndex:A,source:D,over:v});if(this.trigger(C),C.canceled())return;const P=this.getDraggableElementsForContainer(E),L=h({source:D,over:v,overContainer:E,children:P});if(!L)return;const{oldContainer:F,newContainer:R}=L,N=this.index(D),I=new n.SortableSortedEvent({dragEvent:_,oldIndex:A,newIndex:N,oldContainer:F,newContainer:R});this.trigger(I)}[p](_){const D=new n.SortableStopEvent({dragEvent:_,oldIndex:this.startIndex,newIndex:this.index(_.source),oldContainer:this.startContainer,newContainer:_.source.parentNode});this.trigger(D),this.startIndex=null,this.startContainer=null}}e.default=y;function m(b){return Array.prototype.indexOf.call(b.parentNode.children,b)}function h({source:b,over:_,overContainer:D,children:v}){const E=!v.length,A=b.parentNode!==D,C=_&&!A;return E?c(b,D):C?O(b,_):A?w(b,_,D):null}function c(b,_){const D=b.parentNode;return _.appendChild(b),{oldContainer:D,newContainer:_}}function O(b,_){const D=m(b),v=m(_);return D<v?b.parentNode.insertBefore(b,_.nextElementSibling):b.parentNode.insertBefore(b,_),{oldContainer:b.parentNode,newContainer:b.parentNode}}function w(b,_,D){const v=b.parentNode;return _?_.parentNode.insertBefore(b,_):D.appendChild(b),{oldContainer:v,newContainer:b.parentNode}}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.SortableStopEvent=e.SortableSortedEvent=e.SortableSortEvent=e.SortableStartEvent=e.SortableEvent=void 0;var r=t(0),o=l(r);function l(p){return p&&p.__esModule?p:{default:p}}class n extends o.default{get dragEvent(){return this.data.dragEvent}}e.SortableEvent=n,n.type="sortable";class s extends n{get startIndex(){return this.data.startIndex}get startContainer(){return this.data.startContainer}}e.SortableStartEvent=s,s.type="sortable:start",s.cancelable=!0;class d extends n{get currentIndex(){return this.data.currentIndex}get over(){return this.data.oldIndex}get overContainer(){return this.data.newIndex}}e.SortableSortEvent=d,d.type="sortable:sort",d.cancelable=!0;class g extends n{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}}e.SortableSortedEvent=g,g.type="sortable:sorted";class f extends n{get oldIndex(){return this.data.oldIndex}get newIndex(){return this.data.newIndex}get oldContainer(){return this.data.oldContainer}get newContainer(){return this.data.newContainer}}e.SortableStopEvent=f,f.type="sortable:stop"},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(9);Object.keys(r).forEach(function(s){s==="default"||s==="__esModule"||Object.defineProperty(e,s,{enumerable:!0,get:function(){return r[s]}})});var o=t(26),l=n(o);function n(s){return s&&s.__esModule?s:{default:s}}e.default=l.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(h){for(var c=1;c<arguments.length;c++){var O=arguments[c];for(var w in O)Object.prototype.hasOwnProperty.call(O,w)&&(h[w]=O[w])}return h},o=t(5),l=s(o),n=t(10);function s(h){return h&&h.__esModule?h:{default:h}}const d=Symbol("onDragStart"),g=Symbol("onDragOver"),f=Symbol("onDragStop");function p({dragEvent:h,swappedElement:c}){const O=h.source.textContent.trim()||h.source.id||"swappable element",w=c.textContent.trim()||c.id||"swappable element";return`Swapped ${O} with ${w}`}const S={"swappabled:swapped":p};class M extends l.default{constructor(c=[],O={}){super(c,r({},O,{announcements:r({},S,O.announcements||{})})),this.lastOver=null,this[d]=this[d].bind(this),this[g]=this[g].bind(this),this[f]=this[f].bind(this),this.on("drag:start",this[d]).on("drag:over",this[g]).on("drag:stop",this[f])}destroy(){super.destroy(),this.off("drag:start",this._onDragStart).off("drag:over",this._onDragOver).off("drag:stop",this._onDragStop)}[d](c){const O=new n.SwappableStartEvent({dragEvent:c});this.trigger(O),O.canceled()&&c.cancel()}[g](c){if(c.over===c.originalSource||c.over===c.source||c.canceled())return;const O=new n.SwappableSwapEvent({dragEvent:c,over:c.over,overContainer:c.overContainer});if(this.trigger(O),O.canceled())return;this.lastOver&&this.lastOver!==c.over&&m(this.lastOver,c.source),this.lastOver===c.over?this.lastOver=null:this.lastOver=c.over,m(c.source,c.over);const w=new n.SwappableSwappedEvent({dragEvent:c,swappedElement:c.over});this.trigger(w)}[f](c){const O=new n.SwappableStopEvent({dragEvent:c});this.trigger(O),this.lastOver=null}}e.default=M;function y(h){const c=document.createElement("div");h(c),c.parentNode.removeChild(c)}function m(h,c){const O=c.parentNode,w=h.parentNode;y(b=>{w.insertBefore(b,h),O.insertBefore(h,c),w.insertBefore(c,b)})}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.SwappableStopEvent=e.SwappableSwappedEvent=e.SwappableSwapEvent=e.SwappableStartEvent=e.SwappableEvent=void 0;var r=t(0),o=l(r);function l(p){return p&&p.__esModule?p:{default:p}}class n extends o.default{get dragEvent(){return this.data.dragEvent}}e.SwappableEvent=n,n.type="swappable";class s extends n{}e.SwappableStartEvent=s,s.type="swappable:start",s.cancelable=!0;class d extends n{get over(){return this.data.over}get overContainer(){return this.data.overContainer}}e.SwappableSwapEvent=d,d.type="swappable:swap",d.cancelable=!0;class g extends n{get swappedElement(){return this.data.swappedElement}}e.SwappableSwappedEvent=g,g.type="swappable:swapped";class f extends n{}e.SwappableStopEvent=f,f.type="swappable:stop"},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(10);Object.keys(r).forEach(function(s){s==="default"||s==="__esModule"||Object.defineProperty(e,s,{enumerable:!0,get:function(){return r[s]}})});var o=t(29),l=n(o);function n(s){return s&&s.__esModule?s:{default:s}}e.default=l.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(D){for(var v=1;v<arguments.length;v++){var E=arguments[v];for(var A in E)Object.prototype.hasOwnProperty.call(E,A)&&(D[A]=E[A])}return D},o=t(2),l=t(5),n=d(l),s=t(11);function d(D){return D&&D.__esModule?D:{default:D}}const g=Symbol("onDragStart"),f=Symbol("onDragMove"),p=Symbol("onDragStop"),S=Symbol("dropInDropZone"),M=Symbol("returnToOriginalDropzone"),y=Symbol("closestDropzone"),m=Symbol("getDropzones");function h({dragEvent:D,dropzone:v}){const E=D.source.textContent.trim()||D.source.id||"draggable element",A=v.textContent.trim()||v.id||"droppable element";return`Dropped ${E} into ${A}`}function c({dragEvent:D,dropzone:v}){const E=D.source.textContent.trim()||D.source.id||"draggable element",A=v.textContent.trim()||v.id||"droppable element";return`Returned ${E} from ${A}`}const O={"droppable:dropped":h,"droppable:returned":c},w={"droppable:active":"draggable-dropzone--active","droppable:occupied":"draggable-dropzone--occupied"},b={dropzone:".draggable-droppable"};class _ extends n.default{constructor(v=[],E={}){super(v,r({},b,E,{classes:r({},w,E.classes||{}),announcements:r({},O,E.announcements||{})})),this.dropzones=null,this.lastDropzone=null,this.initialDropzone=null,this[g]=this[g].bind(this),this[f]=this[f].bind(this),this[p]=this[p].bind(this),this.on("drag:start",this[g]).on("drag:move",this[f]).on("drag:stop",this[p])}destroy(){super.destroy(),this.off("drag:start",this[g]).off("drag:move",this[f]).off("drag:stop",this[p])}[g](v){if(v.canceled())return;this.dropzones=[...this[m]()];const E=(0,o.closest)(v.sensorEvent.target,this.options.dropzone);if(!E){v.cancel();return}const A=new s.DroppableStartEvent({dragEvent:v,dropzone:E});if(this.trigger(A),A.canceled()){v.cancel();return}this.initialDropzone=E;for(const C of this.dropzones)C.classList.contains(this.getClassNameFor("droppable:occupied"))||C.classList.add(this.getClassNameFor("droppable:active"))}[f](v){if(v.canceled())return;const E=this[y](v.sensorEvent.target);E&&!E.classList.contains(this.getClassNameFor("droppable:occupied"))&&this[S](v,E)?this.lastDropzone=E:(!E||E===this.initialDropzone)&&this.lastDropzone&&(this[M](v),this.lastDropzone=null)}[p](v){const E=new s.DroppableStopEvent({dragEvent:v,dropzone:this.lastDropzone||this.initialDropzone});this.trigger(E);const A=this.getClassNameFor("droppable:occupied");for(const C of this.dropzones)C.classList.remove(this.getClassNameFor("droppable:active"));this.lastDropzone&&this.lastDropzone!==this.initialDropzone&&this.initialDropzone.classList.remove(A),this.dropzones=null,this.lastDropzone=null,this.initialDropzone=null}[S](v,E){const A=new s.DroppableDroppedEvent({dragEvent:v,dropzone:E});if(this.trigger(A),A.canceled())return!1;const C=this.getClassNameFor("droppable:occupied");return this.lastDropzone&&this.lastDropzone.classList.remove(C),E.appendChild(v.source),E.classList.add(C),!0}[M](v){const E=new s.DroppableReturnedEvent({dragEvent:v,dropzone:this.lastDropzone});this.trigger(E),!E.canceled()&&(this.initialDropzone.appendChild(v.source),this.lastDropzone.classList.remove(this.getClassNameFor("droppable:occupied")))}[y](v){return this.dropzones?(0,o.closest)(v,this.dropzones):null}[m](){const v=this.options.dropzone;return typeof v=="string"?document.querySelectorAll(v):v instanceof NodeList||v instanceof Array?v:typeof v=="function"?v():[]}}e.default=_},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.DroppableStopEvent=e.DroppableReturnedEvent=e.DroppableDroppedEvent=e.DroppableStartEvent=e.DroppableEvent=void 0;var r=t(0),o=l(r);function l(p){return p&&p.__esModule?p:{default:p}}class n extends o.default{get dragEvent(){return this.data.dragEvent}}e.DroppableEvent=n,n.type="droppable";class s extends n{get dropzone(){return this.data.dropzone}}e.DroppableStartEvent=s,s.type="droppable:start",s.cancelable=!0;class d extends n{get dropzone(){return this.data.dropzone}}e.DroppableDroppedEvent=d,d.type="droppable:dropped",d.cancelable=!0;class g extends n{get dropzone(){return this.data.dropzone}}e.DroppableReturnedEvent=g,g.type="droppable:returned",g.cancelable=!0;class f extends n{get dropzone(){return this.data.dropzone}}e.DroppableStopEvent=f,f.type="droppable:stop",f.cancelable=!0},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(11);Object.keys(r).forEach(function(s){s==="default"||s==="__esModule"||Object.defineProperty(e,s,{enumerable:!0,get:function(){return r[s]}})});var o=t(32),l=n(o);function n(s){return s&&s.__esModule?s:{default:s}}e.default=l.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(){this.callbacks={}}on(l,...n){return this.callbacks[l]||(this.callbacks[l]=[]),this.callbacks[l].push(...n),this}off(l,n){if(!this.callbacks[l])return null;const s=this.callbacks[l].slice(0);for(let d=0;d<s.length;d++)n===s[d]&&this.callbacks[l].splice(d,1);return this}trigger(l){if(!this.callbacks[l.type])return null;const n=[...this.callbacks[l.type]],s=[];for(let d=n.length-1;d>=0;d--){const g=n[d];try{g(l)}catch(f){s.push(f)}}return s.length&&console.error(`Draggable caught errors while triggering '${l.type}'`,s),this}}e.default=r},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(35),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=void 0;var r=Object.assign||function(D){for(var v=1;v<arguments.length;v++){var E=arguments[v];for(var A in E)Object.prototype.hasOwnProperty.call(E,A)&&(D[A]=E[A])}return D},o=t(2),l=t(12),n=t(36),s=p(n),d=t(6),g=t(13),f=t(14);function p(D){return D&&D.__esModule?D:{default:D}}const S=Symbol("onDragStart"),M=Symbol("onDragMove"),y=Symbol("onDragStop"),m=Symbol("onDragPressure"),h={"drag:start":D=>`Picked up ${D.source.textContent.trim()||D.source.id||"draggable element"}`,"drag:stop":D=>`Released ${D.source.textContent.trim()||D.source.id||"draggable element"}`},c={"container:dragging":"draggable-container--is-dragging","source:dragging":"draggable-source--is-dragging","source:placed":"draggable-source--placed","container:placed":"draggable-container--placed","body:dragging":"draggable--is-dragging","draggable:over":"draggable--over","container:over":"draggable-container--over","source:original":"draggable--original",mirror:"draggable-mirror"},O=e.defaultOptions={draggable:".draggable-source",handle:null,delay:100,placedTimeout:800,plugins:[],sensors:[]};class w{constructor(v=[document.body],E={}){if(v instanceof NodeList||v instanceof Array)this.containers=[...v];else if(v instanceof HTMLElement)this.containers=[v];else throw new Error("Draggable containers are expected to be of type `NodeList`, `HTMLElement[]` or `HTMLElement`");this.options=r({},O,E,{classes:r({},c,E.classes||{}),announcements:r({},h,E.announcements||{})}),this.emitter=new s.default,this.dragging=!1,this.plugins=[],this.sensors=[],this[S]=this[S].bind(this),this[M]=this[M].bind(this),this[y]=this[y].bind(this),this[m]=this[m].bind(this),document.addEventListener("drag:start",this[S],!0),document.addEventListener("drag:move",this[M],!0),document.addEventListener("drag:stop",this[y],!0),document.addEventListener("drag:pressure",this[m],!0);const A=Object.values(w.Plugins).map(L=>L),C=[d.MouseSensor,d.TouchSensor];this.addPlugin(...A,...this.options.plugins),this.addSensor(...C,...this.options.sensors);const P=new g.DraggableInitializedEvent({draggable:this});this.on("mirror:created",({mirror:L})=>this.mirror=L),this.on("mirror:destroy",()=>this.mirror=null),this.trigger(P)}destroy(){document.removeEventListener("drag:start",this[S],!0),document.removeEventListener("drag:move",this[M],!0),document.removeEventListener("drag:stop",this[y],!0),document.removeEventListener("drag:pressure",this[m],!0);const v=new g.DraggableDestroyEvent({draggable:this});this.trigger(v),this.removePlugin(...this.plugins.map(E=>E.constructor)),this.removeSensor(...this.sensors.map(E=>E.constructor))}addPlugin(...v){const E=v.map(A=>new A(this));return E.forEach(A=>A.attach()),this.plugins=[...this.plugins,...E],this}removePlugin(...v){return this.plugins.filter(A=>v.includes(A.constructor)).forEach(A=>A.detach()),this.plugins=this.plugins.filter(A=>!v.includes(A.constructor)),this}addSensor(...v){const E=v.map(A=>new A(this.containers,this.options));return E.forEach(A=>A.attach()),this.sensors=[...this.sensors,...E],this}removeSensor(...v){return this.sensors.filter(A=>v.includes(A.constructor)).forEach(A=>A.detach()),this.sensors=this.sensors.filter(A=>!v.includes(A.constructor)),this}addContainer(...v){return this.containers=[...this.containers,...v],this.sensors.forEach(E=>E.addContainer(...v)),this}removeContainer(...v){return this.containers=this.containers.filter(E=>!v.includes(E)),this.sensors.forEach(E=>E.removeContainer(...v)),this}on(v,...E){return this.emitter.on(v,...E),this}off(v,E){return this.emitter.off(v,E),this}trigger(v){return this.emitter.trigger(v),this}getClassNameFor(v){return this.options.classes[v]}isDragging(){return Boolean(this.dragging)}getDraggableElements(){return this.containers.reduce((v,E)=>[...v,...this.getDraggableElementsForContainer(E)],[])}getDraggableElementsForContainer(v){return[...v.querySelectorAll(this.options.draggable)].filter(A=>A!==this.originalSource&&A!==this.mirror)}[S](v){const E=b(v),{target:A,container:C}=E;if(!this.containers.includes(C))return;if(this.options.handle&&A&&!(0,o.closest)(A,this.options.handle)){E.cancel();return}if(this.originalSource=(0,o.closest)(A,this.options.draggable),this.sourceContainer=C,!this.originalSource){E.cancel();return}this.lastPlacedSource&&this.lastPlacedContainer&&(clearTimeout(this.placedTimeoutID),this.lastPlacedSource.classList.remove(this.getClassNameFor("source:placed")),this.lastPlacedContainer.classList.remove(this.getClassNameFor("container:placed"))),this.source=this.originalSource.cloneNode(!0),this.originalSource.parentNode.insertBefore(this.source,this.originalSource),this.originalSource.style.display="none";const P=new f.DragStartEvent({source:this.source,originalSource:this.originalSource,sourceContainer:C,sensorEvent:E});if(this.trigger(P),this.dragging=!P.canceled(),P.canceled()){this.source.parentNode.removeChild(this.source),this.originalSource.style.display=null;return}this.originalSource.classList.add(this.getClassNameFor("source:original")),this.source.classList.add(this.getClassNameFor("source:dragging")),this.sourceContainer.classList.add(this.getClassNameFor("container:dragging")),document.body.classList.add(this.getClassNameFor("body:dragging")),_(document.body,"none"),requestAnimationFrame(()=>{const F=b(v).clone({target:this.source});this[M](r({},v,{detail:F}))})}[M](v){if(!this.dragging)return;const E=b(v),{container:A}=E;let C=E.target;const P=new f.DragMoveEvent({source:this.source,originalSource:this.originalSource,sourceContainer:A,sensorEvent:E});this.trigger(P),P.canceled()&&E.cancel(),C=(0,o.closest)(C,this.options.draggable);const L=(0,o.closest)(E.target,this.containers),F=E.overContainer||L,R=this.currentOverContainer&&F!==this.currentOverContainer,N=this.currentOver&&C!==this.currentOver,I=F&&this.currentOverContainer!==F,$=L&&C&&this.currentOver!==C;if(N){const z=new f.DragOutEvent({source:this.source,originalSource:this.originalSource,sourceContainer:A,sensorEvent:E,over:this.currentOver});this.currentOver.classList.remove(this.getClassNameFor("draggable:over")),this.currentOver=null,this.trigger(z)}if(R){const z=new f.DragOutContainerEvent({source:this.source,originalSource:this.originalSource,sourceContainer:A,sensorEvent:E,overContainer:this.currentOverContainer});this.currentOverContainer.classList.remove(this.getClassNameFor("container:over")),this.currentOverContainer=null,this.trigger(z)}if(I){F.classList.add(this.getClassNameFor("container:over"));const z=new f.DragOverContainerEvent({source:this.source,originalSource:this.originalSource,sourceContainer:A,sensorEvent:E,overContainer:F});this.currentOverContainer=F,this.trigger(z)}if($){C.classList.add(this.getClassNameFor("draggable:over"));const z=new f.DragOverEvent({source:this.source,originalSource:this.originalSource,sourceContainer:A,sensorEvent:E,overContainer:F,over:C});this.currentOver=C,this.trigger(z)}}[y](v){if(!this.dragging)return;this.dragging=!1;const E=new f.DragStopEvent({source:this.source,originalSource:this.originalSource,sensorEvent:v.sensorEvent,sourceContainer:this.sourceContainer});this.trigger(E),this.source.parentNode.insertBefore(this.originalSource,this.source),this.source.parentNode.removeChild(this.source),this.originalSource.style.display="",this.source.classList.remove(this.getClassNameFor("source:dragging")),this.originalSource.classList.remove(this.getClassNameFor("source:original")),this.originalSource.classList.add(this.getClassNameFor("source:placed")),this.sourceContainer.classList.add(this.getClassNameFor("container:placed")),this.sourceContainer.classList.remove(this.getClassNameFor("container:dragging")),document.body.classList.remove(this.getClassNameFor("body:dragging")),_(document.body,""),this.currentOver&&this.currentOver.classList.remove(this.getClassNameFor("draggable:over")),this.currentOverContainer&&this.currentOverContainer.classList.remove(this.getClassNameFor("container:over")),this.lastPlacedSource=this.originalSource,this.lastPlacedContainer=this.sourceContainer,this.placedTimeoutID=setTimeout(()=>{this.lastPlacedSource&&this.lastPlacedSource.classList.remove(this.getClassNameFor("source:placed")),this.lastPlacedContainer&&this.lastPlacedContainer.classList.remove(this.getClassNameFor("container:placed")),this.lastPlacedSource=null,this.lastPlacedContainer=null},this.options.placedTimeout),this.source=null,this.originalSource=null,this.currentOverContainer=null,this.currentOver=null,this.sourceContainer=null}[m](v){if(!this.dragging)return;const E=b(v),A=this.source||(0,o.closest)(E.originalEvent.target,this.options.draggable),C=new f.DragPressureEvent({sensorEvent:E,source:A,pressure:E.pressure});this.trigger(C)}}e.default=w,w.Plugins={Announcement:l.Announcement,Focusable:l.Focusable,Mirror:l.Mirror,Scrollable:l.Scrollable};function b(D){return D.detail}function _(D,v){D.style.webkitUserSelect=v,D.style.mozUserSelect=v,D.style.msUserSelect=v,D.style.oUserSelect=v,D.style.userSelect=v}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(4),o=n(r),l=t(3);function n(m){return m&&m.__esModule?m:{default:m}}const s=Symbol("onMouseForceWillBegin"),d=Symbol("onMouseForceDown"),g=Symbol("onMouseDown"),f=Symbol("onMouseForceChange"),p=Symbol("onMouseMove"),S=Symbol("onMouseUp"),M=Symbol("onMouseForceGlobalChange");class y extends o.default{constructor(h=[],c={}){super(h,c),this.mightDrag=!1,this[s]=this[s].bind(this),this[d]=this[d].bind(this),this[g]=this[g].bind(this),this[f]=this[f].bind(this),this[p]=this[p].bind(this),this[S]=this[S].bind(this)}attach(){for(const h of this.containers)h.addEventListener("webkitmouseforcewillbegin",this[s],!1),h.addEventListener("webkitmouseforcedown",this[d],!1),h.addEventListener("mousedown",this[g],!0),h.addEventListener("webkitmouseforcechanged",this[f],!1);document.addEventListener("mousemove",this[p]),document.addEventListener("mouseup",this[S])}detach(){for(const h of this.containers)h.removeEventListener("webkitmouseforcewillbegin",this[s],!1),h.removeEventListener("webkitmouseforcedown",this[d],!1),h.removeEventListener("mousedown",this[g],!0),h.removeEventListener("webkitmouseforcechanged",this[f],!1);document.removeEventListener("mousemove",this[p]),document.removeEventListener("mouseup",this[S])}[s](h){h.preventDefault(),this.mightDrag=!0}[d](h){if(this.dragging)return;const c=document.elementFromPoint(h.clientX,h.clientY),O=h.currentTarget,w=new l.DragStartSensorEvent({clientX:h.clientX,clientY:h.clientY,target:c,container:O,originalEvent:h});this.trigger(O,w),this.currentContainer=O,this.dragging=!w.canceled(),this.mightDrag=!1}[S](h){if(!this.dragging)return;const c=new l.DragStopSensorEvent({clientX:h.clientX,clientY:h.clientY,target:null,container:this.currentContainer,originalEvent:h});this.trigger(this.currentContainer,c),this.currentContainer=null,this.dragging=!1,this.mightDrag=!1}[g](h){!this.mightDrag||(h.stopPropagation(),h.stopImmediatePropagation(),h.preventDefault())}[p](h){if(!this.dragging)return;const c=document.elementFromPoint(h.clientX,h.clientY),O=new l.DragMoveSensorEvent({clientX:h.clientX,clientY:h.clientY,target:c,container:this.currentContainer,originalEvent:h});this.trigger(this.currentContainer,O)}[f](h){if(this.dragging)return;const c=h.target,O=h.currentTarget,w=new l.DragPressureSensorEvent({pressure:h.webkitForce,clientX:h.clientX,clientY:h.clientY,target:c,container:O,originalEvent:h});this.trigger(O,w)}[M](h){if(!this.dragging)return;const c=h.target,O=new l.DragPressureSensorEvent({pressure:h.webkitForce,clientX:h.clientX,clientY:h.clientY,target:c,container:this.currentContainer,originalEvent:h});this.trigger(this.currentContainer,O)}}e.default=y},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(38),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(2),o=t(4),l=s(o),n=t(3);function s(h){return h&&h.__esModule?h:{default:h}}const d=Symbol("onMouseDown"),g=Symbol("onMouseUp"),f=Symbol("onDragStart"),p=Symbol("onDragOver"),S=Symbol("onDragEnd"),M=Symbol("onDrop"),y=Symbol("reset");class m extends l.default{constructor(c=[],O={}){super(c,O),this.mouseDownTimeout=null,this.draggableElement=null,this.nativeDraggableElement=null,this[d]=this[d].bind(this),this[g]=this[g].bind(this),this[f]=this[f].bind(this),this[p]=this[p].bind(this),this[S]=this[S].bind(this),this[M]=this[M].bind(this)}attach(){document.addEventListener("mousedown",this[d],!0)}detach(){document.removeEventListener("mousedown",this[d],!0)}[f](c){c.dataTransfer.setData("text",""),c.dataTransfer.effectAllowed=this.options.type;const O=document.elementFromPoint(c.clientX,c.clientY);if(this.currentContainer=(0,r.closest)(c.target,this.containers),!this.currentContainer)return;const w=new n.DragStartSensorEvent({clientX:c.clientX,clientY:c.clientY,target:O,container:this.currentContainer,originalEvent:c});setTimeout(()=>{this.trigger(this.currentContainer,w),w.canceled()?this.dragging=!1:this.dragging=!0},0)}[p](c){if(!this.dragging)return;const O=document.elementFromPoint(c.clientX,c.clientY),w=this.currentContainer,b=new n.DragMoveSensorEvent({clientX:c.clientX,clientY:c.clientY,target:O,container:w,originalEvent:c});this.trigger(w,b),b.canceled()||(c.preventDefault(),c.dataTransfer.dropEffect=this.options.type)}[S](c){if(!this.dragging)return;document.removeEventListener("mouseup",this[g],!0);const O=document.elementFromPoint(c.clientX,c.clientY),w=this.currentContainer,b=new n.DragStopSensorEvent({clientX:c.clientX,clientY:c.clientY,target:O,container:w,originalEvent:c});this.trigger(w,b),this.dragging=!1,this[y]()}[M](c){c.preventDefault()}[d](c){if(c.target&&(c.target.form||c.target.contenteditable))return;const O=(0,r.closest)(c.target,b=>b.draggable);O&&(O.draggable=!1,this.nativeDraggableElement=O),document.addEventListener("mouseup",this[g],!0),document.addEventListener("dragstart",this[f],!1),document.addEventListener("dragover",this[p],!1),document.addEventListener("dragend",this[S],!1),document.addEventListener("drop",this[M],!1);const w=(0,r.closest)(c.target,this.options.draggable);!w||(this.mouseDownTimeout=setTimeout(()=>{w.draggable=!0,this.draggableElement=w},this.options.delay))}[g](){this[y]()}[y](){clearTimeout(this.mouseDownTimeout),document.removeEventListener("mouseup",this[g],!0),document.removeEventListener("dragstart",this[f],!1),document.removeEventListener("dragover",this[p],!1),document.removeEventListener("dragend",this[S],!1),document.removeEventListener("drop",this[M],!1),this.nativeDraggableElement&&(this.nativeDraggableElement.draggable=!0,this.nativeDraggableElement=null),this.draggableElement&&(this.draggableElement.draggable=!1,this.draggableElement=null)}}e.default=m},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(40),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(2),o=t(4),l=s(o),n=t(3);function s(m){return m&&m.__esModule?m:{default:m}}const d=Symbol("onTouchStart"),g=Symbol("onTouchHold"),f=Symbol("onTouchEnd"),p=Symbol("onTouchMove");let S=!1;window.addEventListener("touchmove",m=>{!S||m.preventDefault()},{passive:!1});class M extends l.default{constructor(h=[],c={}){super(h,c),this.currentScrollableParent=null,this.tapTimeout=null,this.touchMoved=!1,this[d]=this[d].bind(this),this[g]=this[g].bind(this),this[f]=this[f].bind(this),this[p]=this[p].bind(this)}attach(){document.addEventListener("touchstart",this[d])}detach(){document.removeEventListener("touchstart",this[d])}[d](h){const c=(0,r.closest)(h.target,this.containers);!c||(document.addEventListener("touchmove",this[p]),document.addEventListener("touchend",this[f]),document.addEventListener("touchcancel",this[f]),c.addEventListener("contextmenu",y),this.currentContainer=c,this.tapTimeout=setTimeout(this[g](h,c),this.options.delay))}[g](h,c){return()=>{if(this.touchMoved)return;const O=h.touches[0]||h.changedTouches[0],w=h.target,b=new n.DragStartSensorEvent({clientX:O.pageX,clientY:O.pageY,target:w,container:c,originalEvent:h});this.trigger(c,b),this.dragging=!b.canceled(),S=this.dragging}}[p](h){if(this.touchMoved=!0,!this.dragging)return;const c=h.touches[0]||h.changedTouches[0],O=document.elementFromPoint(c.pageX-window.scrollX,c.pageY-window.scrollY),w=new n.DragMoveSensorEvent({clientX:c.pageX,clientY:c.pageY,target:O,container:this.currentContainer,originalEvent:h});this.trigger(this.currentContainer,w)}[f](h){if(this.touchMoved=!1,S=!1,document.removeEventListener("touchend",this[f]),document.removeEventListener("touchcancel",this[f]),document.removeEventListener("touchmove",this[p]),this.currentContainer&&this.currentContainer.removeEventListener("contextmenu",y),clearTimeout(this.tapTimeout),!this.dragging)return;const c=h.touches[0]||h.changedTouches[0],O=document.elementFromPoint(c.pageX-window.scrollX,c.pageY-window.scrollY);h.preventDefault();const w=new n.DragStopSensorEvent({clientX:c.pageX,clientY:c.pageY,target:O,container:this.currentContainer,originalEvent:h});this.trigger(this.currentContainer,w),this.currentContainer=null,this.dragging=!1}}e.default=M;function y(m){m.preventDefault(),m.stopPropagation()}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(42),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.DragPressureSensorEvent=e.DragStopSensorEvent=e.DragMoveSensorEvent=e.DragStartSensorEvent=e.SensorEvent=void 0;var r=t(0),o=l(r);function l(p){return p&&p.__esModule?p:{default:p}}class n extends o.default{get originalEvent(){return this.data.originalEvent}get clientX(){return this.data.clientX}get clientY(){return this.data.clientY}get target(){return this.data.target}get container(){return this.data.container}get pressure(){return this.data.pressure}}e.SensorEvent=n;class s extends n{}e.DragStartSensorEvent=s,s.type="drag:start";class d extends n{}e.DragMoveSensorEvent=d,d.type="drag:move";class g extends n{}e.DragStopSensorEvent=g,g.type="drag:stop";class f extends n{}e.DragPressureSensorEvent=f,f.type="drag:pressure"},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(2),o=t(4),l=s(o),n=t(3);function s(y){return y&&y.__esModule?y:{default:y}}const d=Symbol("onContextMenuWhileDragging"),g=Symbol("onMouseDown"),f=Symbol("onMouseMove"),p=Symbol("onMouseUp");class S extends l.default{constructor(m=[],h={}){super(m,h),this.mouseDown=!1,this.mouseDownTimeout=null,this.openedContextMenu=!1,this[d]=this[d].bind(this),this[g]=this[g].bind(this),this[f]=this[f].bind(this),this[p]=this[p].bind(this)}attach(){document.addEventListener("mousedown",this[g],!0)}detach(){document.removeEventListener("mousedown",this[g],!0)}[g](m){if(m.button!==0||m.ctrlKey||m.metaKey)return;document.addEventListener("mouseup",this[p]);const h=document.elementFromPoint(m.clientX,m.clientY),c=(0,r.closest)(h,this.containers);!c||(document.addEventListener("dragstart",M),this.mouseDown=!0,clearTimeout(this.mouseDownTimeout),this.mouseDownTimeout=setTimeout(()=>{if(!this.mouseDown)return;const O=new n.DragStartSensorEvent({clientX:m.clientX,clientY:m.clientY,target:h,container:c,originalEvent:m});this.trigger(c,O),this.currentContainer=c,this.dragging=!O.canceled(),this.dragging&&(document.addEventListener("contextmenu",this[d]),document.addEventListener("mousemove",this[f]))},this.options.delay))}[f](m){if(!this.dragging)return;const h=document.elementFromPoint(m.clientX,m.clientY),c=new n.DragMoveSensorEvent({clientX:m.clientX,clientY:m.clientY,target:h,container:this.currentContainer,originalEvent:m});this.trigger(this.currentContainer,c)}[p](m){if(this.mouseDown=Boolean(this.openedContextMenu),this.openedContextMenu){this.openedContextMenu=!1;return}if(document.removeEventListener("mouseup",this[p]),document.removeEventListener("dragstart",M),!this.dragging)return;const h=document.elementFromPoint(m.clientX,m.clientY),c=new n.DragStopSensorEvent({clientX:m.clientX,clientY:m.clientY,target:h,container:this.currentContainer,originalEvent:m});this.trigger(this.currentContainer,c),document.removeEventListener("contextmenu",this[d]),document.removeEventListener("mousemove",this[f]),this.currentContainer=null,this.dragging=!1}[d](m){m.preventDefault(),this.openedContextMenu=!0}}e.default=S;function M(y){y.preventDefault()}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(45),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(l){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&(l[d]=s[d])}return l};class o{constructor(n=[],s={}){this.containers=[...n],this.options=r({},s),this.dragging=!1,this.currentContainer=null}attach(){return this}detach(){return this}addContainer(...n){this.containers=[...this.containers,...n]}removeContainer(...n){this.containers=this.containers.filter(s=>!n.includes(s))}trigger(n,s){const d=document.createEvent("Event");return d.detail=s,d.initEvent(s.type,!0,!0),n.dispatchEvent(d),this.lastEvent=s,s}}e.default=o},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;function r(o){return requestAnimationFrame(()=>{requestAnimationFrame(o)})}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(48),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;const r=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector;function o(l,n){if(!l)return null;const s=n,d=n,g=n,f=n,p=Boolean(typeof n=="string"),S=Boolean(typeof n=="function"),M=Boolean(n instanceof NodeList||n instanceof Array),y=Boolean(n instanceof HTMLElement);function m(c){return c&&(p?r.call(c,s):M?[...g].includes(c):y?f===c:S?d(c):null)}let h=l;do{if(h=h.correspondingUseElement||h.correspondingElement||h,m(h))return h;h=h.parentNode}while(h&&h!==document.body&&h!==document);return null}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(50),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=e.scroll=e.onDragStop=e.onDragMove=e.onDragStart=void 0;var r=Object.assign||function(O){for(var w=1;w<arguments.length;w++){var b=arguments[w];for(var _ in b)Object.prototype.hasOwnProperty.call(b,_)&&(O[_]=b[_])}return O},o=t(1),l=s(o),n=t(2);function s(O){return O&&O.__esModule?O:{default:O}}const d=e.onDragStart=Symbol("onDragStart"),g=e.onDragMove=Symbol("onDragMove"),f=e.onDragStop=Symbol("onDragStop"),p=e.scroll=Symbol("scroll"),S=e.defaultOptions={speed:6,sensitivity:50,scrollableElements:[]};class M extends l.default{constructor(w){super(w),this.options=r({},S,this.getOptions()),this.currentMousePosition=null,this.scrollAnimationFrame=null,this.scrollableElement=null,this.findScrollableElementFrame=null,this[d]=this[d].bind(this),this[g]=this[g].bind(this),this[f]=this[f].bind(this),this[p]=this[p].bind(this)}attach(){this.draggable.on("drag:start",this[d]).on("drag:move",this[g]).on("drag:stop",this[f])}detach(){this.draggable.off("drag:start",this[d]).off("drag:move",this[g]).off("drag:stop",this[f])}getOptions(){return this.draggable.options.scrollable||{}}getScrollableElement(w){return this.hasDefinedScrollableElements()?(0,n.closest)(w,this.options.scrollableElements)||document.documentElement:h(w)}hasDefinedScrollableElements(){return Boolean(this.options.scrollableElements.length!==0)}[d](w){this.findScrollableElementFrame=requestAnimationFrame(()=>{this.scrollableElement=this.getScrollableElement(w.source)})}[g](w){if(this.findScrollableElementFrame=requestAnimationFrame(()=>{this.scrollableElement=this.getScrollableElement(w.sensorEvent.target)}),!this.scrollableElement)return;const b=w.sensorEvent,_={x:0,y:0};"ontouchstart"in window&&(_.y=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,_.x=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),this.currentMousePosition={clientX:b.clientX-_.x,clientY:b.clientY-_.y},this.scrollAnimationFrame=requestAnimationFrame(this[p])}[f](){cancelAnimationFrame(this.scrollAnimationFrame),cancelAnimationFrame(this.findScrollableElementFrame),this.scrollableElement=null,this.scrollAnimationFrame=null,this.findScrollableElementFrame=null,this.currentMousePosition=null}[p](){if(!this.scrollableElement||!this.currentMousePosition)return;cancelAnimationFrame(this.scrollAnimationFrame);const{speed:w,sensitivity:b}=this.options,_=this.scrollableElement.getBoundingClientRect(),D=_.bottom>window.innerHeight,E=_.top<0||D,A=c(),C=this.scrollableElement,P=this.currentMousePosition.clientX,L=this.currentMousePosition.clientY;if(C!==document.body&&C!==document.documentElement&&!E){const{offsetHeight:F,offsetWidth:R}=C;_.top+F-L<b?C.scrollTop+=w:L-_.top<b&&(C.scrollTop-=w),_.left+R-P<b?C.scrollLeft+=w:P-_.left<b&&(C.scrollLeft-=w)}else{const{innerHeight:F,innerWidth:R}=window;L<b?A.scrollTop-=w:F-L<b&&(A.scrollTop+=w),P<b?A.scrollLeft-=w:R-P<b&&(A.scrollLeft+=w)}this.scrollAnimationFrame=requestAnimationFrame(this[p])}}e.default=M;function y(O){const w=/(auto|scroll)/,b=getComputedStyle(O,null),_=b.getPropertyValue("overflow")+b.getPropertyValue("overflow-y")+b.getPropertyValue("overflow-x");return w.test(_)}function m(O){return getComputedStyle(O).getPropertyValue("position")==="static"}function h(O){if(!O)return c();const w=getComputedStyle(O).getPropertyValue("position"),b=w==="absolute",_=(0,n.closest)(O,D=>b&&m(D)?!1:y(D));return w==="fixed"||!_?c():_}function c(){return document.scrollingElement||document.documentElement}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=void 0;var r=t(52),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default,e.defaultOptions=r.defaultOptions},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.MirrorDestroyEvent=e.MirrorMoveEvent=e.MirrorAttachedEvent=e.MirrorCreatedEvent=e.MirrorCreateEvent=e.MirrorEvent=void 0;var r=t(0),o=l(r);function l(S){return S&&S.__esModule?S:{default:S}}class n extends o.default{get source(){return this.data.source}get originalSource(){return this.data.originalSource}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get dragEvent(){return this.data.dragEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}e.MirrorEvent=n;class s extends n{}e.MirrorCreateEvent=s,s.type="mirror:create";class d extends n{get mirror(){return this.data.mirror}}e.MirrorCreatedEvent=d,d.type="mirror:created";class g extends n{get mirror(){return this.data.mirror}}e.MirrorAttachedEvent=g,g.type="mirror:attached";class f extends n{get mirror(){return this.data.mirror}}e.MirrorMoveEvent=f,f.type="mirror:move",f.cancelable=!0;class p extends n{get mirror(){return this.data.mirror}}e.MirrorDestroyEvent=p,p.type="mirror:destroy",p.cancelable=!0},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(54);Object.keys(r).forEach(function(o){o==="default"||o==="__esModule"||Object.defineProperty(e,o,{enumerable:!0,get:function(){return r[o]}})})},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=e.getAppendableContainer=e.onScroll=e.onMirrorMove=e.onMirrorCreated=e.onDragStop=e.onDragMove=e.onDragStart=void 0;var r=Object.assign||function(C){for(var P=1;P<arguments.length;P++){var L=arguments[P];for(var F in L)Object.prototype.hasOwnProperty.call(L,F)&&(C[F]=L[F])}return C},o=t(1),l=s(o),n=t(55);function s(C){return C&&C.__esModule?C:{default:C}}function d(C,P){var L={};for(var F in C)P.indexOf(F)>=0||!Object.prototype.hasOwnProperty.call(C,F)||(L[F]=C[F]);return L}const g=e.onDragStart=Symbol("onDragStart"),f=e.onDragMove=Symbol("onDragMove"),p=e.onDragStop=Symbol("onDragStop"),S=e.onMirrorCreated=Symbol("onMirrorCreated"),M=e.onMirrorMove=Symbol("onMirrorMove"),y=e.onScroll=Symbol("onScroll"),m=e.getAppendableContainer=Symbol("getAppendableContainer"),h=e.defaultOptions={constrainDimensions:!1,xAxis:!0,yAxis:!0,cursorOffsetX:null,cursorOffsetY:null};class c extends l.default{constructor(P){super(P),this.options=r({},h,this.getOptions()),this.scrollOffset={x:0,y:0},this.initialScrollOffset={x:window.scrollX,y:window.scrollY},this[g]=this[g].bind(this),this[f]=this[f].bind(this),this[p]=this[p].bind(this),this[S]=this[S].bind(this),this[M]=this[M].bind(this),this[y]=this[y].bind(this)}attach(){this.draggable.on("drag:start",this[g]).on("drag:move",this[f]).on("drag:stop",this[p]).on("mirror:created",this[S]).on("mirror:move",this[M])}detach(){this.draggable.off("drag:start",this[g]).off("drag:move",this[f]).off("drag:stop",this[p]).off("mirror:created",this[S]).off("mirror:move",this[M])}getOptions(){return this.draggable.options.mirror||{}}[g](P){if(P.canceled())return;"ontouchstart"in window&&document.addEventListener("scroll",this[y],!0),this.initialScrollOffset={x:window.scrollX,y:window.scrollY};const{source:L,originalSource:F,sourceContainer:R,sensorEvent:N}=P,I=new n.MirrorCreateEvent({source:L,originalSource:F,sourceContainer:R,sensorEvent:N,dragEvent:P});if(this.draggable.trigger(I),A(N)||I.canceled())return;const $=this[m](L)||R;this.mirror=L.cloneNode(!0);const z=new n.MirrorCreatedEvent({source:L,originalSource:F,sourceContainer:R,sensorEvent:N,dragEvent:P,mirror:this.mirror}),q=new n.MirrorAttachedEvent({source:L,originalSource:F,sourceContainer:R,sensorEvent:N,dragEvent:P,mirror:this.mirror});this.draggable.trigger(z),$.appendChild(this.mirror),this.draggable.trigger(q)}[f](P){if(!this.mirror||P.canceled())return;const{source:L,originalSource:F,sourceContainer:R,sensorEvent:N}=P,I=new n.MirrorMoveEvent({source:L,originalSource:F,sourceContainer:R,sensorEvent:N,dragEvent:P,mirror:this.mirror});this.draggable.trigger(I)}[p](P){if("ontouchstart"in window&&document.removeEventListener("scroll",this[y],!0),this.initialScrollOffset={x:0,y:0},this.scrollOffset={x:0,y:0},!this.mirror)return;const{source:L,sourceContainer:F,sensorEvent:R}=P,N=new n.MirrorDestroyEvent({source:L,mirror:this.mirror,sourceContainer:F,sensorEvent:R,dragEvent:P});this.draggable.trigger(N),N.canceled()||this.mirror.parentNode.removeChild(this.mirror)}[y](){this.scrollOffset={x:window.scrollX-this.initialScrollOffset.x,y:window.scrollY-this.initialScrollOffset.y}}[S]({mirror:P,source:L,sensorEvent:F}){const R=this.draggable.getClassNameFor("mirror"),N=$=>{let{mirrorOffset:z,initialX:q,initialY:te}=$,fe=d($,["mirrorOffset","initialX","initialY"]);return this.mirrorOffset=z,this.initialX=q,this.initialY=te,r({mirrorOffset:z,initialX:q,initialY:te},fe)},I={mirror:P,source:L,sensorEvent:F,mirrorClass:R,scrollOffset:this.scrollOffset,options:this.options};return Promise.resolve(I).then(O).then(w).then(b).then(_).then(v({initial:!0})).then(D).then(N)}[M](P){if(P.canceled())return null;const L={mirror:P.mirror,sensorEvent:P.sensorEvent,mirrorOffset:this.mirrorOffset,options:this.options,initialX:this.initialX,initialY:this.initialY,scrollOffset:this.scrollOffset};return Promise.resolve(L).then(v({raf:!0}))}[m](P){const L=this.options.appendTo;return typeof L=="string"?document.querySelector(L):L instanceof HTMLElement?L:typeof L=="function"?L(P):P.parentNode}}e.default=c;function O(C){let{source:P}=C,L=d(C,["source"]);return E(F=>{const R=P.getBoundingClientRect();F(r({source:P,sourceRect:R},L))})}function w(C){let{sensorEvent:P,sourceRect:L,options:F}=C,R=d(C,["sensorEvent","sourceRect","options"]);return E(N=>{const I=F.cursorOffsetY===null?P.clientY-L.top:F.cursorOffsetY,$=F.cursorOffsetX===null?P.clientX-L.left:F.cursorOffsetX;N(r({sensorEvent:P,sourceRect:L,mirrorOffset:{top:I,left:$},options:F},R))})}function b(C){let{mirror:P,source:L,options:F}=C,R=d(C,["mirror","source","options"]);return E(N=>{let I,$;if(F.constrainDimensions){const z=getComputedStyle(L);I=z.getPropertyValue("height"),$=z.getPropertyValue("width")}P.style.position="fixed",P.style.pointerEvents="none",P.style.top=0,P.style.left=0,P.style.margin=0,F.constrainDimensions&&(P.style.height=I,P.style.width=$),N(r({mirror:P,source:L,options:F},R))})}function _(C){let{mirror:P,mirrorClass:L}=C,F=d(C,["mirror","mirrorClass"]);return E(R=>{P.classList.add(L),R(r({mirror:P,mirrorClass:L},F))})}function D(C){let{mirror:P}=C,L=d(C,["mirror"]);return E(F=>{P.removeAttribute("id"),delete P.id,F(r({mirror:P},L))})}function v({withFrame:C=!1,initial:P=!1}={}){return L=>{let{mirror:F,sensorEvent:R,mirrorOffset:N,initialY:I,initialX:$,scrollOffset:z,options:q}=L,te=d(L,["mirror","sensorEvent","mirrorOffset","initialY","initialX","scrollOffset","options"]);return E(fe=>{const ge=r({mirror:F,sensorEvent:R,mirrorOffset:N,options:q},te);if(N){const he=R.clientX-N.left-z.x,me=R.clientY-N.top-z.y;q.xAxis&&q.yAxis||P?F.style.transform=`translate3d(${he}px, ${me}px, 0)`:q.xAxis&&!q.yAxis?F.style.transform=`translate3d(${he}px, ${I}px, 0)`:q.yAxis&&!q.xAxis&&(F.style.transform=`translate3d(${$}px, ${me}px, 0)`),P&&(ge.initialX=he,ge.initialY=me)}fe(ge)},{frame:C})}}function E(C,{raf:P=!1}={}){return new Promise((L,F)=>{P?requestAnimationFrame(()=>{C(L,F)}):C(L,F)})}function A(C){return/^drag/.test(C.originalEvent.type)}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=void 0;var r=t(56),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default,e.defaultOptions=r.defaultOptions},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(y){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var c in h)Object.prototype.hasOwnProperty.call(h,c)&&(y[c]=h[c])}return y},o=t(1),l=n(o);function n(y){return y&&y.__esModule?y:{default:y}}const s=Symbol("onInitialize"),d=Symbol("onDestroy"),g={};class f extends l.default{constructor(m){super(m),this.options=r({},g,this.getOptions()),this[s]=this[s].bind(this),this[d]=this[d].bind(this)}attach(){this.draggable.on("draggable:initialize",this[s]).on("draggable:destroy",this[d])}detach(){this.draggable.off("draggable:initialize",this[s]).off("draggable:destroy",this[d])}getOptions(){return this.draggable.options.focusable||{}}getElements(){return[...this.draggable.containers,...this.draggable.getDraggableElements()]}[s](){requestAnimationFrame(()=>{this.getElements().forEach(m=>S(m))})}[d](){requestAnimationFrame(()=>{this.getElements().forEach(m=>M(m))})}}e.default=f;const p=[];function S(y){Boolean(!y.getAttribute("tabindex")&&y.tabIndex===-1)&&(p.push(y),y.tabIndex=0)}function M(y){const m=p.indexOf(y);m!==-1&&(y.tabIndex=-1,p.splice(m,1))}},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=t(58),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(l){this.draggable=l}attach(){throw new Error("Not Implemented")}detach(){throw new Error("Not Implemented")}}e.default=r},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=void 0;var r=Object.assign||function(b){for(var _=1;_<arguments.length;_++){var D=arguments[_];for(var v in D)Object.prototype.hasOwnProperty.call(D,v)&&(b[v]=D[v])}return b},o=t(1),l=n(o);function n(b){return b&&b.__esModule?b:{default:b}}const s=Symbol("onInitialize"),d=Symbol("onDestroy"),g=Symbol("announceEvent"),f=Symbol("announceMessage"),p="aria-relevant",S="aria-atomic",M="aria-live",y="role",m=e.defaultOptions={expire:7e3};class h extends l.default{constructor(_){super(_),this.options=r({},m,this.getOptions()),this.originalTriggerMethod=this.draggable.trigger,this[s]=this[s].bind(this),this[d]=this[d].bind(this)}attach(){this.draggable.on("draggable:initialize",this[s])}detach(){this.draggable.off("draggable:destroy",this[d])}getOptions(){return this.draggable.options.announcements||{}}[g](_){const D=this.options[_.type];D&&typeof D=="string"&&this[f](D),D&&typeof D=="function"&&this[f](D(_))}[f](_){O(_,{expire:this.options.expire})}[s](){this.draggable.trigger=_=>{try{this[g](_)}finally{this.originalTriggerMethod.call(this.draggable,_)}}}[d](){this.draggable.trigger=this.originalTriggerMethod}}e.default=h;const c=w();function O(b,{expire:_}){const D=document.createElement("div");return D.textContent=b,c.appendChild(D),setTimeout(()=>{c.removeChild(D)},_)}function w(){const b=document.createElement("div");return b.setAttribute("id","draggable-live-region"),b.setAttribute(p,"additions"),b.setAttribute(S,"true"),b.setAttribute(M,"assertive"),b.setAttribute(y,"log"),b.style.position="fixed",b.style.width="1px",b.style.height="1px",b.style.top="-1px",b.style.overflow="hidden",b}document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(c)})},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions=void 0;var r=t(61),o=l(r);function l(n){return n&&n.__esModule?n:{default:n}}e.default=o.default,e.defaultOptions=r.defaultOptions},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.DraggableDestroyEvent=e.DraggableInitializedEvent=e.DraggableEvent=void 0;var r=t(0),o=l(r);function l(g){return g&&g.__esModule?g:{default:g}}class n extends o.default{get draggable(){return this.data.draggable}}e.DraggableEvent=n,n.type="draggable";class s extends n{}e.DraggableInitializedEvent=s,s.type="draggable:initialize";class d extends n{}e.DraggableDestroyEvent=d,d.type="draggable:destroy"},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(n){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(n[g]=d[g])}return n};const o=Symbol("canceled");class l{constructor(s){this[o]=!1,this.data=s}get type(){return this.constructor.type}get cancelable(){return this.constructor.cancelable}cancel(){this[o]=!0}canceled(){return Boolean(this[o])}clone(s){return new this.constructor(r({},this.data,s))}}e.default=l,l.type="event",l.cancelable=!1},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.DragStopEvent=e.DragPressureEvent=e.DragOutContainerEvent=e.DragOverContainerEvent=e.DragOutEvent=e.DragOverEvent=e.DragMoveEvent=e.DragStartEvent=e.DragEvent=void 0;var r=t(0),o=l(r);function l(m){return m&&m.__esModule?m:{default:m}}class n extends o.default{get source(){return this.data.source}get originalSource(){return this.data.originalSource}get mirror(){return this.data.mirror}get sourceContainer(){return this.data.sourceContainer}get sensorEvent(){return this.data.sensorEvent}get originalEvent(){return this.sensorEvent?this.sensorEvent.originalEvent:null}}e.DragEvent=n,n.type="drag";class s extends n{}e.DragStartEvent=s,s.type="drag:start",s.cancelable=!0;class d extends n{}e.DragMoveEvent=d,d.type="drag:move";class g extends n{get overContainer(){return this.data.overContainer}get over(){return this.data.over}}e.DragOverEvent=g,g.type="drag:over",g.cancelable=!0;class f extends n{get overContainer(){return this.data.overContainer}get over(){return this.data.over}}e.DragOutEvent=f,f.type="drag:out";class p extends n{get overContainer(){return this.data.overContainer}}e.DragOverContainerEvent=p,p.type="drag:over:container";class S extends n{get overContainer(){return this.data.overContainer}}e.DragOutContainerEvent=S,S.type="drag:out:container";class M extends n{get pressure(){return this.data.pressure}}e.DragPressureEvent=M,M.type="drag:pressure";class y extends n{}e.DragStopEvent=y,y.type="drag:stop"},function(i,e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.Plugins=e.Sensors=e.Sortable=e.Swappable=e.Droppable=e.Draggable=e.BasePlugin=e.BaseEvent=void 0;var r=t(5);Object.defineProperty(e,"Draggable",{enumerable:!0,get:function(){return h(r).default}});var o=t(34);Object.defineProperty(e,"Droppable",{enumerable:!0,get:function(){return h(o).default}});var l=t(31);Object.defineProperty(e,"Swappable",{enumerable:!0,get:function(){return h(l).default}});var n=t(28);Object.defineProperty(e,"Sortable",{enumerable:!0,get:function(){return h(n).default}});var s=t(0),d=h(s),g=t(1),f=h(g),p=t(6),S=m(p),M=t(25),y=m(M);function m(c){if(c&&c.__esModule)return c;var O={};if(c!=null)for(var w in c)Object.prototype.hasOwnProperty.call(c,w)&&(O[w]=c[w]);return O.default=c,O}function h(c){return c&&c.__esModule?c:{default:c}}e.BaseEvent=d.default,e.BasePlugin=f.default,e.Sensors=S,e.Plugins=y}])})})(Ve);function ze(a,u,i){const e=a.slice();return e[6]=u[i],e[8]=i,e}function $e(a){let u,i,e=a[0].squares,t=[];for(let o=0;o<e.length;o+=1)t[o]=Xe(ze(a,e,o));const r=o=>B(t[o],1,1,()=>{t[o]=null});return{c(){for(let o=0;o<t.length;o+=1)t[o].c();u=nt()},m(o,l){for(let n=0;n<t.length;n+=1)t[n].m(o,l);K(o,u,l),i=!0},p(o,l){if(l&7){e=o[0].squares;let n;for(n=0;n<e.length;n+=1){const s=ze(o,e,n);t[n]?(t[n].p(s,l),X(t[n],1)):(t[n]=Xe(s),t[n].c(),X(t[n],1),t[n].m(u.parentNode,u))}for(_e(),n=e.length;n<t.length;n+=1)r(n);ye()}},i(o){if(!i){for(let l=0;l<e.length;l+=1)X(t[l]);i=!0}},o(o){t=t.filter(Boolean);for(let l=0;l<t.length;l+=1)B(t[l]);i=!1},d(o){et(t,o),o&&H(u)}}}function qe(a){let u,i,e;return i=new Dt({props:{piece:a[6]}}),{c(){u=x("div"),He(i.$$.fragment),Y(u,"class","piece svelte-xbyfhb")},m(t,r){K(t,u,r),De(i,u,null),e=!0},p(t,r){const o={};r&1&&(o.piece=t[6]),i.$set(o)},i(t){e||(X(i.$$.fragment,t),e=!0)},o(t){B(i.$$.fragment,t),e=!1},d(t){t&&H(u),Oe(i)}}}function Xe(a){let u,i,e,t,r=a[6]&&qe(a);return{c(){u=x("div"),r&&r.c(),i=tt(),Y(u,"class",e="square "+(a[2](a[8])?"white":"black")+" "+(a[1].has(a[8])?"available":"")+" svelte-xbyfhb"),Y(u,"data-i",a[8])},m(o,l){K(o,u,l),r&&r.m(u,null),ke(u,i),t=!0},p(o,l){o[6]?r?(r.p(o,l),l&1&&X(r,1)):(r=qe(o),r.c(),X(r,1),r.m(u,i)):r&&(_e(),B(r,1,1,()=>{r=null}),ye()),(!t||l&2&&e!==(e="square "+(o[2](o[8])?"white":"black")+" "+(o[1].has(o[8])?"available":"")+" svelte-xbyfhb"))&&Y(u,"class",e)},i(o){t||(X(r),t=!0)},o(o){B(r),t=!1},d(o){o&&H(u),r&&r.d()}}}function Ot(a){let u,i,e=a[0]&&$e(a);return{c(){u=x("div"),e&&e.c(),Y(u,"class","board svelte-xbyfhb")},m(t,r){K(t,u,r),e&&e.m(u,null),i=!0},p(t,[r]){t[0]?e?(e.p(t,r),r&1&&X(e,1)):(e=$e(t),e.c(),X(e,1),e.m(u,null)):e&&(_e(),B(e,1,1,()=>{e=null}),ye())},i(t){i||(X(e),i=!0)},o(t){B(e),i=!1},d(t){t&&H(u),e&&e.d()}}}function Mt(a,u,i){let{board:e}=u;const t=n=>(n+(d=>Math.floor(d/8))(n))%2==0,r={from:null,target:null,piece:null,captures:null};let o=r,l=new Set;return it(()=>{const n=new Ve.exports.Droppable(document.querySelectorAll(".board"),{draggable:".piece",dropzone:".square"}),s=d=>{var g,f;return parseInt((f=(g=d==null?void 0:d.data)==null?void 0:g.dropzone)==null?void 0:f.dataset.i)};n.on("droppable:start",d=>{o=r;const g=s(d),f=e.squares[g];o.from=g,o.piece=f,i(1,l=e.getAvailableMovesAtIndex(g,f)),console.log("moves are",l)}),n.on("droppable:dropped",d=>{const g=d.data.dropzone.querySelectorAll(".piece");console.log(g,"<<<<<<<<<<<<<<<<"),console.log(d);let f=s(d);console.log("i is",f,l),l.has(f)||d.cancel()}),n.on("droppable:stop",async d=>{i(1,l=new Set);const g=s(d);if(g===o.from)return console.log("cancel move");const f=e.squares[g];o.target=g,f&&(o.captures=f),console.log("move is",o),e.pushUncheckedMove(o);let p=await e.searchGoodMove(4);console.log("good move is",p),e.pushUncheckedMove(p),i(0,e)})}),a.$$set=n=>{"board"in n&&i(0,e=n.board)},[e,l,t]}class wt extends we{constructor(u){super(),Me(this,u,Mt,Ot,Se,{board:0})}}let T;const Ke=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Ke.decode();let ae=new Uint8Array;function le(){return ae.byteLength===0&&(ae=new Uint8Array(T.memory.buffer)),ae}function J(a,u){return Ke.decode(le().subarray(a,a+u))}let W=0;const ue=new TextEncoder("utf-8"),Ct=typeof ue.encodeInto=="function"?function(a,u){return ue.encodeInto(a,u)}:function(a,u){const i=ue.encode(a);return u.set(i),{read:a.length,written:i.length}};function Q(a,u,i){if(i===void 0){const l=ue.encode(a),n=u(l.length);return le().subarray(n,n+l.length).set(l),W=l.length,n}let e=a.length,t=u(e);const r=le();let o=0;for(;o<e;o++){const l=a.charCodeAt(o);if(l>127)break;r[t+o]=l}if(o!==e){o!==0&&(a=a.slice(o)),t=i(t,e,e=o+a.length*3);const l=le().subarray(t+o,t+e),n=Ct(a,l);o+=n.written}return W=o,t}let ce=new Int32Array;function U(){return ce.byteLength===0&&(ce=new Int32Array(T.memory.buffer)),ce}function Pt(a){try{const e=T.__wbindgen_add_to_stack_pointer(-16),t=Q(a,T.__wbindgen_malloc,T.__wbindgen_realloc),r=W;T.parse_fen(e,t,r);var u=U()[e/4+0],i=U()[e/4+1];return J(u,i)}finally{T.__wbindgen_add_to_stack_pointer(16),T.__wbindgen_free(u,i)}}function At(a){try{const e=T.__wbindgen_add_to_stack_pointer(-16),t=Q(a,T.__wbindgen_malloc,T.__wbindgen_realloc),r=W;T.get_squares(e,t,r);var u=U()[e/4+0],i=U()[e/4+1];return J(u,i)}finally{T.__wbindgen_add_to_stack_pointer(16),T.__wbindgen_free(u,i)}}function Lt(a,u){try{const t=T.__wbindgen_add_to_stack_pointer(-16),r=Q(a,T.__wbindgen_malloc,T.__wbindgen_realloc),o=W,l=Q(u,T.__wbindgen_malloc,T.__wbindgen_realloc),n=W;T.push_unchecked_move(t,r,o,l,n);var i=U()[t/4+0],e=U()[t/4+1];return J(i,e)}finally{T.__wbindgen_add_to_stack_pointer(16),T.__wbindgen_free(i,e)}}function Ft(a,u,i){try{const r=T.__wbindgen_add_to_stack_pointer(-16),o=Q(a,T.__wbindgen_malloc,T.__wbindgen_realloc),l=W,n=Q(i,T.__wbindgen_malloc,T.__wbindgen_realloc),s=W;T.get_available_moves_at_index(r,o,l,u,n,s);var e=U()[r/4+0],t=U()[r/4+1];return J(e,t)}finally{T.__wbindgen_add_to_stack_pointer(16),T.__wbindgen_free(e,t)}}async function Rt(a,u){if(typeof Response=="function"&&a instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(a,u)}catch(e){if(a.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e);else throw e}const i=await a.arrayBuffer();return await WebAssembly.instantiate(i,u)}else{const i=await WebAssembly.instantiate(a,u);return i instanceof WebAssembly.Instance?{instance:i,module:a}:i}}function Tt(){const a={};return a.wbg={},a.wbg.__wbg_alert_b104b2d27a3fa2a1=function(u,i){alert(J(u,i))},a.wbg.__wbindgen_throw=function(u,i){throw new Error(J(u,i))},a}function Nt(a,u){return T=a.exports,Ge.__wbindgen_wasm_module=u,ce=new Int32Array,ae=new Uint8Array,T}async function Ge(a){typeof a>"u"&&(a=new URL("/crust/assets/crust_bg.275a712e.wasm",self.location));const u=Tt();(typeof a=="string"||typeof Request=="function"&&a instanceof Request||typeof URL=="function"&&a instanceof URL)&&(a=fetch(a));const{instance:i,module:e}=await Rt(await a,u);return Nt(i,e)}let It=(a=21)=>crypto.getRandomValues(new Uint8Array(a)).reduce((u,i)=>(i&=63,i<36?u+=i.toString(36):i<62?u+=(i-26).toString(36).toUpperCase():i>62?u+="-":u+="_",u),"");Ge();var de,Je;const Ce=class{constructor(u){Pe(this,de);ne(this,"s");ne(this,"worker");ne(this,"cbs");this.s=u,this.cbs=new Map,this.worker=new Worker("/crust/assets/worker.92bc44a5.js",{type:"module"}),this.worker.addEventListener("message",i=>{this.cbs.has(i.data.id)&&this.cbs.get(i.data.id)(i.data.res)})}getAvailableMoveOfSquare(u,i){}get squares(){return JSON.parse(At(this.s))}static fromFen(u){return new Ce(Pt(u))}async searchGoodMove(u){let i=await Ae(this,de,Je).call(this,"search_good_move",this.s,u);return JSON.parse(i)}pushUncheckedMove(u){this.s=Lt(this.s,JSON.stringify(u))}getAvailableMovesAtIndex(u,i){let e=JSON.parse(Ft(this.s,u,JSON.stringify(i)));return new Set(e)}};let Ee=Ce;de=new WeakSet,Je=async function(u,...i){const e=It();return this.worker.postMessage({id:e,fn:u,params:i}),new Promise(t=>{this.cbs.set(e,r=>{t(r),this.cbs.delete(e)})})};function zt(a){let u,i,e;return i=new wt({props:{board:a[0]}}),{c(){u=x("main"),He(i.$$.fragment)},m(t,r){K(t,u,r),De(i,u,null),e=!0},p:G,i(t){e||(X(i.$$.fragment,t),e=!0)},o(t){B(i.$$.fragment,t),e=!1},d(t){t&&H(u),Oe(i)}}}const $t="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";function qt(a){let u=Ee.fromFen($t);console.log("board is",u);let i=u.squares;return console.log("squares are",i),[u]}class Xt extends we{constructor(u){super(),Me(this,u,qt,zt,Se,{})}}new Xt({target:document.getElementById("app")});
