let n;const m=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});m.decode();let b=new Uint8Array;function g(){return b.byteLength===0&&(b=new Uint8Array(n.memory.buffer)),b}function w(e,t){return m.decode(g().subarray(e,e+t))}let c=0;const u=new TextEncoder("utf-8"),v=typeof u.encodeInto=="function"?function(e,t){return u.encodeInto(e,t)}:function(e,t){const o=u.encode(e);return t.set(o),{read:e.length,written:o.length}};function f(e,t,o){if(o===void 0){const s=u.encode(e),d=t(s.length);return g().subarray(d,d+s.length).set(s),c=s.length,d}let r=e.length,a=t(r);const i=g();let _=0;for(;_<r;_++){const s=e.charCodeAt(_);if(s>127)break;i[a+_]=s}if(_!==r){_!==0&&(e=e.slice(_)),a=o(a,r,r=_+e.length*3);const s=g().subarray(a+_,a+r),d=v(e,s);_+=d.written}return c=_,a}function A(e){const t=f(e,n.__wbindgen_malloc,n.__wbindgen_realloc),o=c;n.greet(t,o)}let y=new Int32Array;function l(){return y.byteLength===0&&(y=new Int32Array(n.memory.buffer)),y}function k(e){try{const r=n.__wbindgen_add_to_stack_pointer(-16),a=f(e,n.__wbindgen_malloc,n.__wbindgen_realloc),i=c;n.parse_fen(r,a,i);var t=l()[r/4+0],o=l()[r/4+1];return w(t,o)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(t,o)}}function I(e){try{const r=n.__wbindgen_add_to_stack_pointer(-16),a=f(e,n.__wbindgen_malloc,n.__wbindgen_realloc),i=c;n.get_squares(r,a,i);var t=l()[r/4+0],o=l()[r/4+1];return w(t,o)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(t,o)}}function W(e,t){try{const a=n.__wbindgen_add_to_stack_pointer(-16),i=f(e,n.__wbindgen_malloc,n.__wbindgen_realloc),_=c;n.search_good_move(a,i,_,t);var o=l()[a/4+0],r=l()[a/4+1];return w(o,r)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(o,r)}}function M(e,t){try{const a=n.__wbindgen_add_to_stack_pointer(-16),i=f(e,n.__wbindgen_malloc,n.__wbindgen_realloc),_=c,s=f(t,n.__wbindgen_malloc,n.__wbindgen_realloc),d=c;n.push_unchecked_move(a,i,_,s,d);var o=l()[a/4+0],r=l()[a/4+1];return w(o,r)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(o,r)}}function x(e,t,o){try{const i=n.__wbindgen_add_to_stack_pointer(-16),_=f(e,n.__wbindgen_malloc,n.__wbindgen_realloc),s=c,d=f(o,n.__wbindgen_malloc,n.__wbindgen_realloc),h=c;n.get_available_moves_at_index(i,_,s,t,d,h);var r=l()[i/4+0],a=l()[i/4+1];return w(r,a)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(r,a)}}async function R(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const o=await e.arrayBuffer();return await WebAssembly.instantiate(o,t)}else{const o=await WebAssembly.instantiate(e,t);return o instanceof WebAssembly.Instance?{instance:o,module:e}:o}}function U(){const e={};return e.wbg={},e.wbg.__wbg_alert_b104b2d27a3fa2a1=function(t,o){alert(w(t,o))},e.wbg.__wbindgen_throw=function(t,o){throw new Error(w(t,o))},e}function S(e,t){return n=e.exports,p.__wbindgen_wasm_module=t,y=new Int32Array,b=new Uint8Array,n}async function p(e){typeof e>"u"&&(e=new URL("/crust/assets/crust_bg.275a712e.wasm",self.location));const t=U();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:o,module:r}=await R(await e,t);return S(o,r)}await p();const T={greet:A,parse_fen:k,get_squares:I,search_good_move:W,get_available_moves_at_index:x,push_unchecked_move:M};onmessage=async e=>{const{id:t,fn:o,params:r}=e.data,a=await T[o](...r);postMessage({id:t,res:a})};
